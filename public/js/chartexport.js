function RGBColor(a){this.ok=!1,"#"==a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var c,b={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(c in b)a==c&&(a=b[c]);var d=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}];for(c=0;c<d.length;c++){var e=d[c].process,f=d[c].re.exec(a);f&&(channels=e(f),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=0>this.r||isNaN(this.r)?0:255<this.r?255:this.r,this.g=0>this.g||isNaN(this.g)?0:255<this.g?255:this.g,this.b=0>this.b||isNaN(this.b)?0:255<this.b?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return 1==a.length&&(a="0"+a),1==b.length&&(b="0"+b),1==c.length&&(c="0"+c),"#"+a+b+c},this.getHelpXML=function(){for(var a=[],c=0;c<d.length;c++)for(var e=d[c].example,f=0;f<e.length;f++)a[a.length]=e[f];for(var g in b)a[a.length]=g;for(e=document.createElement("ul"),e.setAttribute("id","rgbcolor-examples"),c=0;c<a.length;c++)try{var h=document.createElement("li"),i=new RGBColor(a[c]),j=document.createElement("div");j.style.cssText="margin: 3px; border: 1px solid black; background:"+i.toHex()+"; color:"+i.toHex(),j.appendChild(document.createTextNode("test"));var k=document.createTextNode(" "+a[c]+" -> "+i.toRGB()+" -> "+i.toHex());h.appendChild(j),h.appendChild(k),e.appendChild(h)}catch(a){}return e}}if(AmCharts.AmExport=AmCharts.Class({construct:function(a,b,c){this.DEBUG=!1,this.chart=a,this.canvas=null,this.svgs=[],this.userCFG=b,this.buttonIcon="export.png",this.exportPNG=!0,this.exportSVG=this.exportJPG=this.exportPDF=!1,this.top=this.right=0,this.buttonRollOverColor="#EFEFEF",this.textRollOverColor="#CC0000",this.buttonTitle="Save chart as an image",this.buttonAlpha=.75,this.imageFileName="amChart",this.imageBackgroundColor="#FFFFFF",c&&this.init()},toCoordinate:function(a){return void 0===a?"auto":-1!=String(a).indexOf("%")?a:a+"px"},init:function(){var a=this,b=[];a.exportPNG&&b.push("png"),a.exportPDF&&b.push("pdf"),a.exportJPG&&b.push("jpg"),a.exportSVG&&b.push("svg");var c=[];if(1==b.length)c.push({format:b[0],iconTitle:a.buttonTitle,icon:a.chart.pathToImages+a.buttonIcon});else if(1<b.length){for(var d=[],e=0;e<b.length;e++)d.push({format:b[e],title:b[e].toUpperCase()});c.push({onclick:function(){},icon:a.chart.pathToImages+a.buttonIcon,items:d})}b=a.color,void 0===b&&(b=a.chart.color),d=a.buttonColor,void 0===d&&(d="transparent"),a.cfg={menuTop:a.toCoordinate(a.top),menuLeft:a.toCoordinate(a.left),menuRight:a.toCoordinate(a.right),menuBottom:a.toCoordinate(a.bottom),menuItems:c,menuItemStyle:{backgroundColor:d,opacity:a.buttonAlpha,rollOverBackgroundColor:a.buttonRollOverColor,color:b,rollOverColor:a.textRollOverColor,paddingTop:"6px",paddingRight:"6px",paddingBottom:"6px",paddingLeft:"6px",marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",textAlign:"left",textDecoration:"none",fontFamily:a.chart.fontFamily,fontSize:a.chart.fontSize+"px"},menuItemOutput:{backgroundColor:a.imageBackgroundColor,fileName:a.imageFileName,format:"png",output:"dataurlnewwindow",render:"browser",dpi:90,onclick:function(a,b,c){c.preventDefault(),a.output(b)}},removeImagery:!0},a.processing={buffer:[],drawn:0,timer:0},"undefined"!=typeof window.canvg&&"undefined"!=typeof window.RGBColor&&(a.cfg.menuItemOutput.render="canvg"),"undefined"!=typeof window.saveAs&&(a.cfg.menuItemOutput.output="save"),AmCharts.isIE&&10>AmCharts.IEversion&&(a.cfg.menuItemOutput.output="dataurlnewwindow"),(c=a.userCFG)&&(c.menuItemOutput=AmCharts.extend(a.cfg.menuItemOutput,c.menuItemOutput||{}),c.menuItemStyle=AmCharts.extend(a.cfg.menuItemStyle,c.menuItemStyle||{}),a.cfg=AmCharts.extend(a.cfg,c)),a.chart.AmExport=a,a.chart.addListener("rendered",function(){a.setup()}),a.DEBUG&&(window.AmExport=a)},log:function(){console.log("AmExport: ",arguments)},setup:function(){10==this.DEBUG&&this.log("SETUP START"),!AmCharts.isIE||AmCharts.isIE&&9<AmCharts.IEversion?(this.generateButtons(),10==this.DEBUG&&this.log("SETUP END")):10==this.DEBUG&&this.log("< IE10 NOT SUPPORTED")},generateBinaryArray:function(a){for(var i,j,b=a.length,c=new Uint8Array(b/4*3|0),d=0,e=0,f=[0,0],g=0,h=0,k=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]);b--;)j=a.charCodeAt(d++),i=k[j-43],255!==i&&void 0!==i&&(f[1]=f[0],f[0]=j,h=h<<6|i,g++,4===g&&(c[e++]=h>>>16,61!==f[1]&&(c[e++]=h>>>8),61!==f[0]&&(c[e++]=h),g=0));return c},generateBlob:function(a,b){var c="image/svg+xml"!=b?a.indexOf(",")+1:0,d=a.substring(0,c),e=a,f=new Blob;return-1!=d.indexOf("base64")&&(e=this.generateBinaryArray(a.substring(c))),AmCharts.isIE&&10>AmCharts.IEversion?(f.data=e,f.size=e.length,f.type=b,f.encoding="base64"):f=new Blob([e],{type:b}),f},generatePDF:function(a){var b={output:function(){return""}},c=this.canvas.toDataURL("image/jpeg"),d=25.4*this.canvas.width/a.dpi;return a=25.4*this.canvas.height/a.dpi,window.jsPDF?(b=new jsPDF,b.addImage?b.addImage(c,"JPEG",0,0,d,a):alert("Missing jsPDF plugin; Please add the 'addImage' plugin.")):alert("Missing jsPDF lib; Don't forget to add the addImage plugin."),b},output:function(a,b){var c=this;return a=AmCharts.extend(AmCharts.extend({},c.cfg.menuItemOutput),a||{}),c.chart.prepareForExport&&c.chart.prepareForExport(),c.generateOutput(a,function(){var e,d=null;10==c.DEBUG&&c.log("OUTPUT",a.format),"image/svg+xml"==a.format||"svg"==a.format?(d=c.generateSVG(),e=c.generateBlob(d,"image/svg+xml"),"save"==a.output?saveAs(e,a.fileName+".svg"):"datastring"==a.output||"datauristring"==a.output||"dataurlstring"==a.output?e="data:image/svg+xml;base64,"+btoa(d):"dataurlnewwindow"==a.output?window.open("data:image/svg+xml;base64,"+btoa(d)):"datauri"==a.output||"dataurl"==a.output?location.href="data:image/svg+xml;base64,"+btoa(d):"datastream"==a.output&&(location.href="data:image/octet-stream;base64,"+d),b&&b.apply(c,[e])):"application/pdf"==a.format||"pdf"==a.format?(d=c.generatePDF(a).output("dataurlstring"),e=c.generateBlob(d,"application/pdf"),"save"==a.output?saveAs(e,a.fileName+".pdf"):"datastring"==a.output||"datauristring"==a.output||"dataurlstring"==a.output?e=d:"dataurlnewwindow"==a.output?window.open(d):"datauri"==a.output||"dataurl"==a.output?location.href=d:"datastream"==a.output&&(location.href=d.replace("application/pdf","application/octet-stream")),b&&b.apply(c,[e])):"image/png"==a.format||"png"==a.format?(d=c.canvas.toDataURL("image/png"),e=c.generateBlob(d,"image/png"),"save"==a.output?saveAs(e,a.fileName+".png"):"datastring"==a.output||"datauristring"==a.output||"dataurlstring"==a.output?e=d:"dataurlnewwindow"==a.output?window.open(d):"datauri"==a.output||"dataurl"==a.output?location.href=d:"datastream"==a.output&&(location.href=d.replace("image/png","image/octet-stream")),b&&b.apply(c,[e])):"image/jpeg"!=a.format&&"jpeg"!=a.format&&"jpg"!=a.format||(d=c.canvas.toDataURL("image/jpeg"),e=c.generateBlob(d,"image/jpeg"),"save"==a.output?saveAs(e,a.fileName+".jpg"):"datastring"==a.output||"datauristring"==a.output||"dataurlstring"==a.output?e=d:"dataurlnewwindow"==a.output?window.open(d):"datauri"==a.output||"dataurl"==a.output?location.href=d:"datastream"==a.output&&(location.href=d.replace("image/jpeg","image/octet-stream")),b&&b.apply(c,[e]))})},polifySVG:function(a){function b(a,b){for(var d=a.getElementsByTagName(b),e=d.length;e--;){if(c.cfg.removeImagery)d[e].parentNode.removeChild(d[e]);else{var f=document.createElement("img"),g=document.createElement("canvas"),h=g.getContext("2d");g.width=d[e].getAttribute("width"),g.height=d[e].getAttribute("height"),f.src=d[e].getAttribute("xlink:href"),f.width=d[e].getAttribute("width"),f.height=d[e].getAttribute("height");try{h.drawImage(f,0,0,f.width,f.height),datastring=g.toDataURL()}catch(a){throw datastring=f.src,c.log("Tainted canvas, reached browser CORS security; origin from imagery must be equal to the server!"),Error(a)}d[e].setAttribute("xlink:href",datastring)}10==c.DEBUG&&c.log("POLIFIED",d[e])}}var c=this;return 0==AmCharts.IEversion&&(a.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.cfg.removeImagery||a.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink")),10==c.DEBUG&&c.log("POLIFIED",a),b(a,"pattern"),b(a,"image"),c.svgs.push(a),a},generateSVG:function(){var a=document.createElement("svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");for(var b=0;b<this.processing.buffer.length;b++){var c=document.createElement("g"),d=this.processing.buffer[b];d[0].setAttribute("xmlns","http://www.w3.org/2000/svg"),d[0].setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),c.setAttribute("transform","translate("+d[1].x+","+d[1].y+")"),c.appendChild(d[0]),a.appendChild(c)}return(new XMLSerializer).serializeToString(a)},generateOutput:function(a,b){function c(){var e,f,i;return d.processing.buffer.length==d.processing.drawn||"svg"==a.format?(10==d.DEBUG&&d.log("END DRAWING"),b()):(10==d.DEBUG&&d.log("DRAW",d.processing.drawn+1,"OF",d.processing.buffer.length),f=d.processing.buffer[d.processing.drawn],i=(new XMLSerializer).serializeToString(f[0]),e=f[1],10==d.DEBUG&&d.log("SOURCE",i),void("browser"==a.render?(e=new Image,e.id=AmCharts.getUniqueId(),i="data:image/svg+xml;base64,"+btoa(i),e.onload=function(){h.drawImage(this,f[1].x,f[1].y),d.processing.drawn++,10==d.DEBUG&&d.log("ONLOAD",this),c()},e.onerror=function(){10==d.DEBUG&&d.log("ONERROR",this),h.drawImage(this,f[1].x,f[1].y),d.processing.drawn++,c()},e.src=i,10==d.DEBUG&&d.log("ADD",e),(e.complete||"undefined"==typeof e.complete||void 0===e.complete)&&(10==d.DEBUG&&d.log("FORCE ONLOAD",e),e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",e.src=i)):"canvg"==a.render&&canvg(g,i,{offsetX:e.x,offsetY:e.y,ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,renderCallback:function(){d.processing.drawn++,c()}})))}for(var d=this,e=[],f=[],g=document.createElement("canvas"),h=g.getContext("2d"),i={y:0,x:0},e=d.chart.div.getElementsByTagName("svg"),j=0;j<e.length;j++)f.push(e[j]);for(d.chart.legend&&"outside"==d.chart.legend.position&&(d.chart.legend.container.container.externalLegend=!0,f.push(d.chart.legend.container.container),"left"==d.cfg.legendPosition?i.x=d.chart.legend.div.offsetWidth:"top"==d.cfg.legendPosition?i.y=d.chart.legend.div.offsetHeight:"object"==typeof d.cfg.legendPosition&&(i.y=d.cfg.legendPosition.chartTop,i.x=d.cfg.legendPosition.chartLeft)),d.processing.buffer=[],d.processing.drawn=0,d.canvas=g,d.svgs=[],10==d.DEBUG&&d.log("START EXPORT"),10==d.DEBUG&&d.log("START BUFFERING"),j=0;j<f.length;j++){var e=f[j].parentNode,k=Number(e.style.left.slice(0,-2)),l=Number(e.style.top.slice(0,-2)),m=d.polifySVG(f[j].cloneNode(!0)),n=AmCharts.extend({},i);f[j].externalLegend?"right"==d.cfg.legendPosition?(i.y=0,i.x=d.chart.divRealWidth):"bottom"==d.cfg.legendPosition?i.y=l?l:i.y:"object"==typeof d.cfg.legendPosition?(i.x=d.cfg.legendPosition.left,i.y=d.cfg.legendPosition.top):(i.x=0,i.y=0):"relative"==e.style.position?(i.x=k?k:i.x,i.y=l?l:i.y):(i.x=k,i.y=l),d.processing.buffer.push([m,AmCharts.extend({},i)]),l&&k?i=n:i.y+=l?0:e.offsetHeight,10==d.DEBUG&&d.log("BUFFERED",f[j],i)}return 10==d.DEBUG&&d.log("END BUFFERING"),10==d.DEBUG&&d.log("START DRAWING",a.render),10==d.DEBUG&&d.log("FILL BACKGROUND"),g.id=AmCharts.getUniqueId(),g.width=d.chart.divRealWidth,g.height=d.chart.divRealHeight+80,d.chart.legend&&"outside"==d.chart.legend.position&&(-1!=["left","right"].indexOf(d.cfg.legendPosition)?g.width+=d.chart.legend.div.offsetWidth:"object"==typeof d.cfg.legendPosition?(g.width+=d.cfg.legendPosition.width,g.height+=d.cfg.legendPosition.height):g.height+=d.chart.legend.div.offsetHeight),f=!1,d.chart.periodSelector&&(-1!=["left","right"].indexOf(d.chart.periodSelector.position)?(g.width-=d.chart.periodSelector.div.offsetWidth+16,f=!0):g.height-=d.chart.periodSelector.div.offsetHeight),d.chart.dataSetSelector&&(-1!=["left","right"].indexOf(d.chart.dataSetSelector.position)?f||(g.width-=d.chart.dataSetSelector.div.offsetWidth+16):g.height-=d.chart.dataSetSelector.div.offsetHeight),(a.backgroundColor||"image/jpeg"==a.format)&&(h.fillStyle=a.backgroundColor||"#FFFFFF",h.fillRect(0,0,g.width,g.height)),c()},generateButtons:function(){function a(d){var e=document.createElement("ul");e.setAttribute("style","list-style: none; margin: 0; padding: 0;");for(var f=0;f<d.length;f++){var g=document.createElement("li"),h=document.createElement("span"),i=document.createElement("a"),j=d[f],k=null,l=AmCharts.extend(AmCharts.extend({},b.cfg.menuItemStyle),d[f]),j=AmCharts.extend(AmCharts.extend({},b.cfg.menuItemOutput),j);j.icon&&(h.alt="",h.src=j.icon,h.setAttribute("style","margin: 0 auto;border: 6px solid;outline: none;display:none"),h.setAttribute("id","expMapImage"),j.iconTitle&&(h.title=j.iconTitle),i.appendChild(h)),i.href="javascript:void(0)",j.title&&(h.setAttribute("style","margin: 0px 5px;"),i.innerHTML+=j.title),i.setAttribute("style","display: block;"),AmCharts.extend(i.style,l),i.onclick=j.onclick.bind(i,b,j),g.appendChild(i),j.items&&(k=a(j.items),g.appendChild(k),g.onmouseover=function(){k.style.display="block"},g.onmouseout=function(){k.style.display="none"},k.style.display="none"),e.appendChild(g),i.onmouseover=function(){this.style.backgroundColor=l.rollOverBackgroundColor,this.style.color=l.rollOverColor,this.style.borderColor=l.rollOverBorderColor},i.onmouseout=function(){this.style.backgroundColor=l.backgroundColor,this.style.color=l.color,this.style.borderColor=l.borderColor}}return c++,10==b.DEBUG&&b.log("MENU",e),e}var b=this,c=0;b.div?(div=b.div,div.innerHTML=""):(div=document.createElement("div"),b.div=div),div.setAttribute("style","position: absolute;top:"+b.cfg.menuTop+";right:"+b.cfg.menuRight+";bottom:"+b.cfg.menuBottom+";left:"+b.cfg.menuLeft+";"),div.setAttribute("class","amExportButton"),div.appendChild(a(b.cfg.menuItems)),b.chart.containerDiv.appendChild(div)}}),function(){function a(){var a={FRAMERATE:30,MAX_VIRTUAL_PIXELS:3e4,init:function(b){var c=0;a.UniqueId=function(){return c++,"canvg"+c},a.Definitions={},a.Styles={},a.Animations=[],a.Images=[],a.ctx=b,a.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(a,b){this.viewPorts.push({width:a,height:b})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(a){return null!=a&&"number"==typeof a?a:"x"==a?this.width():"y"==a?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}}};return a.init(),a.ImagesLoaded=function(){for(var b=0;b<a.Images.length;b++)if(!a.Images[b].loaded)return!1;return!0},a.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},a.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")},a.ajax=function(a){var b;return(b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(b.open("GET",a,!1),b.send(null),b.responseText):null},a.parseXml=function(a){if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");a=a.replace(/<!DOCTYPE svg[^>]*>/,"");var b=new ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b},a.Property=function(a,b){this.name=a,this.value=b},a.Property.prototype.getValue=function(){return this.value},a.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},a.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var a=parseFloat(this.value);return(this.value+"").match(/%$/)&&(a/=100),a},a.Property.prototype.valueOrDefault=function(a){return this.hasValue()?this.value:a},a.Property.prototype.numValueOrDefault=function(a){return this.hasValue()?this.numValue():a},a.Property.prototype.addOpacity=function(b){var c=this.value;if(null!=b&&""!=b&&"string"==typeof this.value){var d=new RGBColor(this.value);d.ok&&(c="rgba("+d.r+", "+d.g+", "+d.b+", "+b+")")}return new a.Property(this.name,c)},a.Property.prototype.getDefinition=function(){var b=this.value.match(/#([^\)'"]+)/);return b&&(b=b[1]),b||(b=this.value),a.Definitions[b]},a.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},a.Property.prototype.getFillStyleDefinition=function(b,c){var d=this.getDefinition();if(null!=d&&d.createGradient)return d.createGradient(a.ctx,b,c);if(null!=d&&d.createPattern){if(d.getHrefAttribute().hasValue()){var e=d.attribute("patternTransform"),d=d.getHrefAttribute().getDefinition();e.hasValue()&&(d.attribute("patternTransform",!0).value=e.value)}return d.createPattern(a.ctx,b)}return null},a.Property.prototype.getDPI=function(a){return 96},a.Property.prototype.getEM=function(b){var c=12,d=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);return d.hasValue()&&(c=d.toPixels(b)),c},a.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},a.Property.prototype.toPixels=function(b,c){if(!this.hasValue())return 0;var d=this.value+"";return d.match(/em$/)?this.numValue()*this.getEM(b):d.match(/ex$/)?this.numValue()*this.getEM(b)/2:d.match(/px$/)?this.numValue():d.match(/pt$/)?this.numValue()*this.getDPI(b)*(1/72):d.match(/pc$/)?15*this.numValue():d.match(/cm$/)?this.numValue()*this.getDPI(b)/2.54:d.match(/mm$/)?this.numValue()*this.getDPI(b)/25.4:d.match(/in$/)?this.numValue()*this.getDPI(b):d.match(/%$/)?this.numValue()*a.ViewPort.ComputeSize(b):(d=this.numValue(),c&&1>d?d*a.ViewPort.ComputeSize(b):d)},a.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/s$/)?1e3*this.numValue():(a.match(/ms$/),this.numValue())},a.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/deg$/)?this.numValue()*(Math.PI/180):a.match(/grad$/)?this.numValue()*(Math.PI/200):a.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},a.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(b,c,d,e,f,g){return g=null!=g?this.Parse(g):this.CreateFont("","","","","",a.ctx.font),{fontFamily:f||g.fontFamily,fontSize:e||g.fontSize,fontStyle:b||g.fontStyle,fontWeight:d||g.fontWeight,fontVariant:c||g.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var b=this;this.Parse=function(c){var d={};c=a.trim(a.compressSpaces(c||"")).split(" ");for(var e=!1,f=!1,g=!1,h=!1,i="",j=0;j<c.length;j++)f||-1==b.Styles.indexOf(c[j])?h||-1==b.Variants.indexOf(c[j])?g||-1==b.Weights.indexOf(c[j])?e?"inherit"!=c[j]&&(i+=c[j]):("inherit"!=c[j]&&(d.fontSize=c[j].split("/")[0]),f=h=g=e=!0):("inherit"!=c[j]&&(d.fontWeight=c[j]),f=h=g=!0):("inherit"!=c[j]&&(d.fontVariant=c[j]),f=h=!0):("inherit"!=c[j]&&(d.fontStyle=c[j]),f=!0);return""!=i&&(d.fontFamily=i),d}},a.ToNumberArray=function(b){b=a.trim(a.compressSpaces((b||"").replace(/,/g," "))).split(" ");for(var c=0;c<b.length;c++)b[c]=parseFloat(b[c]);return b},a.Point=function(a,b){this.x=a,this.y=b},a.Point.prototype.angleTo=function(a){return Math.atan2(a.y-this.y,a.x-this.x)},a.Point.prototype.applyTransform=function(a){var b=this.x*a[1]+this.y*a[3]+a[5];this.x=this.x*a[0]+this.y*a[2]+a[4],this.y=b},a.CreatePoint=function(b){return b=a.ToNumberArray(b),new a.Point(b[0],b[1])},a.CreatePath=function(b){b=a.ToNumberArray(b);for(var c=[],d=0;d<b.length;d+=2)c.push(new a.Point(b[d],b[d+1]));return c},a.BoundingBox=function(a,b,c,d){this.y2=this.x2=this.y1=this.x1=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(a,b){null!=a&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x2=this.x1=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a)),null!=b&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y2=this.y1=b),b<this.y1&&(this.y1=b),b>this.y2&&(this.y2=b))},this.addX=function(a){this.addPoint(a,null)},this.addY=function(a){this.addPoint(null,a)},this.addBoundingBox=function(a){this.addPoint(a.x1,a.y1),this.addPoint(a.x2,a.y2)},this.addQuadraticCurve=function(a,b,c,d,e,f){c=a+2/3*(c-a),d=b+2/3*(d-b),this.addBezierCurve(a,b,c,c+1/3*(e-a),d,d+1/3*(f-b),e,f)},this.addBezierCurve=function(a,b,c,d,e,f,g,h){var j=[a,b],k=[c,d],l=[e,f],m=[g,h];for(this.addPoint(j[0],j[1]),this.addPoint(m[0],m[1]),i=0;1>=i;i++)a=function(a){return Math.pow(1-a,3)*j[i]+3*Math.pow(1-a,2)*a*k[i]+3*(1-a)*Math.pow(a,2)*l[i]+Math.pow(a,3)*m[i]},b=6*j[i]-12*k[i]+6*l[i],c=-3*j[i]+9*k[i]-9*l[i]+3*m[i],d=3*k[i]-3*j[i],0==c?0!=b&&(b=-d/b,0<b&&1>b&&(0==i&&this.addX(a(b)),1==i&&this.addY(a(b)))):(d=Math.pow(b,2)-4*d*c,0>d||(e=(-b+Math.sqrt(d))/(2*c),0<e&&1>e&&(0==i&&this.addX(a(e)),1==i&&this.addY(a(e))),b=(-b-Math.sqrt(d))/(2*c),0<b&&1>b&&(0==i&&this.addX(a(b)),1==i&&this.addY(a(b)))))},this.isPointInBox=function(a,b){return this.x1<=a&&a<=this.x2&&this.y1<=b&&b<=this.y2},this.addPoint(a,b),this.addPoint(c,d)},a.Transform=function(b){var c=this;this.Type={},this.Type.translate=function(b){this.p=a.CreatePoint(b),this.apply=function(a){a.translate(this.p.x||0,this.p.y||0)},this.unapply=function(a){a.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(a){a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(b){b=a.ToNumberArray(b),this.angle=new a.Property("angle",b[0]),this.cx=b[1]||0,this.cy=b[2]||0,this.apply=function(a){a.translate(this.cx,this.cy),a.rotate(this.angle.toRadians()),a.translate(-this.cx,-this.cy)},this.unapply=function(a){a.translate(this.cx,this.cy),a.rotate(-1*this.angle.toRadians()),a.translate(-this.cx,-this.cy)},this.applyToPoint=function(a){var b=this.angle.toRadians();a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),a.applyTransform([Math.cos(b),Math.sin(b),-Math.sin(b),Math.cos(b),0,0]),a.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(b){this.p=a.CreatePoint(b),this.apply=function(a){a.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(a){a.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(a){a.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(b){this.m=a.ToNumberArray(b),this.apply=function(a){a.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(a){a.applyTransform(this.m)}},this.Type.SkewBase=function(b){this.base=c.Type.matrix,this.base(b),this.angle=new a.Property("angle",b)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(a){this.base=c.Type.SkewBase,this.base(a),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(a){this.base=c.Type.SkewBase,this.base(a),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].apply(a)},this.unapply=function(a){for(var b=this.transforms.length-1;0<=b;b--)this.transforms[b].unapply(a)},this.applyToPoint=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].applyToPoint(a)},b=a.trim(a.compressSpaces(b)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var d=0;d<b.length;d++){var e=a.trim(b[d].split("(")[0]),f=b[d].split("(")[1].replace(")",""),f=new this.Type[e](f);f.type=e,this.transforms.push(f)}},a.AspectRatio=function(b,c,d,e,f,g,h,i,j,k){c=a.compressSpaces(c),c=c.replace(/^defer\s/,"");var l=c.split(" ")[0]||"xMidYMid";c=c.split(" ")[1]||"meet";var m=d/e,n=f/g,o=Math.min(m,n),p=Math.max(m,n);"meet"==c&&(e*=o,g*=o),"slice"==c&&(e*=p,g*=p),j=new a.Property("refX",j),k=new a.Property("refY",k),j.hasValue()&&k.hasValue()?b.translate(-o*j.toPixels("x"),-o*k.toPixels("y")):(l.match(/^xMid/)&&("meet"==c&&o==n||"slice"==c&&p==n)&&b.translate(d/2-e/2,0),l.match(/YMid$/)&&("meet"==c&&o==m||"slice"==c&&p==m)&&b.translate(0,f/2-g/2),l.match(/^xMax/)&&("meet"==c&&o==n||"slice"==c&&p==n)&&b.translate(d-e,0),l.match(/YMax$/)&&("meet"==c&&o==m||"slice"==c&&p==m)&&b.translate(0,f-g)),"none"==l?b.scale(m,n):"meet"==c?b.scale(o,o):"slice"==c&&b.scale(p,p),b.translate(null==h?0:-h,null==i?0:-i)},a.Element={},a.EmptyProperty=new a.Property("EMPTY",""),a.Element.ElementBase=function(b){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(b,c){var d=this.attributes[b];return null!=d?d:(1==c&&(d=new a.Property(b,""),this.attributes[b]=d),d||a.EmptyProperty)},this.getHrefAttribute=function(){for(var b in this.attributes)if(b.match(/:href$/))return this.attributes[b];return a.EmptyProperty},this.style=function(b,c){var d=this.styles[b];if(null!=d)return d;var e=this.attribute(b);return null!=e&&e.hasValue()?this.styles[b]=e:(e=this.parent,null!=e&&(e=e.style(b),null!=e&&e.hasValue())?e:(1==c&&(d=new a.Property(b,""),this.styles[b]=d),d||a.EmptyProperty))},this.render=function(a){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(a.save(),this.attribute("mask").hasValue()){var b=this.attribute("mask").getDefinition();null!=b&&b.apply(a,this)}else this.style("filter").hasValue()?(b=this.style("filter").getDefinition(),null!=b&&b.apply(a,this)):(this.setContext(a),this.renderChildren(a),this.clearContext(a));a.restore()}},this.setContext=function(a){},this.clearContext=function(a){},this.renderChildren=function(a){for(var b=0;b<this.children.length;b++)this.children[b].render(a)},this.addChild=function(b,c){var d=b;c&&(d=a.CreateElement(b)),d.parent=this,this.children.push(d)},null!=b&&1==b.nodeType){for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];1==d.nodeType&&this.addChild(d,!0),this.captureTextNodes&&3==d.nodeType&&""!=a.trim(a.compressSpaces(d.nodeValue||d.text||""))&&this.addChild(new a.Element.tspan(d),!1)}for(c=0;c<b.attributes.length;c++)d=b.attributes[c],this.attributes[d.nodeName]=new a.Property(d.nodeName,d.nodeValue);if(d=a.Styles[b.nodeName],null!=d)for(var e in d)this.styles[e]=d[e];if(this.attribute("class").hasValue())for(var c=a.compressSpaces(this.attribute("class").value).split(" "),f=0;f<c.length;f++){if(d=a.Styles["."+c[f]],null!=d)for(e in d)this.styles[e]=d[e];if(d=a.Styles[b.nodeName+"."+c[f]],null!=d)for(e in d)this.styles[e]=d[e]}if(this.attribute("id").hasValue()&&(d=a.Styles["#"+this.attribute("id").value],null!=d))for(e in d)this.styles[e]=d[e];if(this.attribute("style").hasValue())for(d=this.attribute("style").value.split(";"),c=0;c<d.length;c++)""!=a.trim(d[c])&&(b=d[c].split(":"),e=a.trim(b[0]),b=a.trim(b[1]),this.styles[e]=new a.Property(e,b));this.attribute("id").hasValue()&&null==a.Definitions[this.attribute("id").value]&&(a.Definitions[this.attribute("id").value]=this)}},a.Element.RenderedElementBase=function(b){this.base=a.Element.ElementBase,this.base(b),this.setContext=function(b){if(this.style("fill").isUrlDefinition()){var c=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=c&&(b.fillStyle=c)}else this.style("fill").hasValue()&&(c=this.style("fill"),"currentColor"==c.value&&(c.value=this.style("color").value),b.fillStyle="none"==c.value?"rgba(0,0,0,0)":c.value);this.style("fill-opacity").hasValue()&&(c=new a.Property("fill",b.fillStyle),c=c.addOpacity(this.style("fill-opacity").value),b.fillStyle=c.value),this.style("stroke").isUrlDefinition()?(c=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")),null!=c&&(b.strokeStyle=c)):this.style("stroke").hasValue()&&(c=this.style("stroke"),"currentColor"==c.value&&(c.value=this.style("color").value),b.strokeStyle="none"==c.value?"rgba(0,0,0,0)":c.value),this.style("stroke-opacity").hasValue()&&(c=new a.Property("stroke",b.strokeStyle),c=c.addOpacity(this.style("stroke-opacity").value),b.strokeStyle=c.value),this.style("stroke-width").hasValue()&&(c=this.style("stroke-width").toPixels(),b.lineWidth=0==c?.001:c),this.style("stroke-linecap").hasValue()&&(b.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(b.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(b.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&(c=a.ToNumberArray(this.style("stroke-dasharray").value),"undefined"!=typeof b.setLineDash?b.setLineDash(c):"undefined"!=typeof b.webkitLineDash?b.webkitLineDash=c:"undefined"!=typeof b.mozDash&&(b.mozDash=c),c=this.style("stroke-dashoffset").numValueOrDefault(1),"undefined"!=typeof b.lineDashOffset?b.lineDashOffset=c:"undefined"!=typeof b.webkitLineDashOffset?b.webkitLineDashOffset=c:"undefined"!=typeof b.mozDashOffset&&(b.mozDashOffset=c)),
"undefined"!=typeof b.font&&(b.font=a.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()&&new a.Transform(this.attribute("transform").value).apply(b),this.style("clip-path").hasValue()&&(c=this.style("clip-path").getDefinition(),null!=c&&c.apply(b)),this.style("opacity").hasValue()&&(b.globalAlpha=this.style("opacity").numValue())}},a.Element.RenderedElementBase.prototype=new a.Element.ElementBase,a.Element.PathElementBase=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.path=function(b){return null!=b&&b.beginPath(),new a.BoundingBox},this.renderChildren=function(b){this.path(b),a.Mouse.checkPath(this,b),""!=b.fillStyle&&(this.attribute("fill-rule").hasValue()?b.fill(this.attribute("fill-rule").value):b.fill()),""!=b.strokeStyle&&b.stroke();var c=this.getMarkers();if(null!=c){if(this.style("marker-start").isUrlDefinition()){var d=this.style("marker-start").getDefinition();d.render(b,c[0][0],c[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var d=this.style("marker-mid").getDefinition(),e=1;e<c.length-1;e++)d.render(b,c[e][0],c[e][1]);this.style("marker-end").isUrlDefinition()&&(d=this.style("marker-end").getDefinition(),d.render(b,c[c.length-1][0],c[c.length-1][1]))}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},a.Element.PathElementBase.prototype=new a.Element.RenderedElementBase,a.Element.svg=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.baseClearContext=this.clearContext,this.clearContext=function(b){this.baseClearContext(b),a.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(b){b.strokeStyle="rgba(0,0,0,0)",b.lineCap="butt",b.lineJoin="miter",b.miterLimit=4,this.baseSetContext(b),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),b.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var c=a.ViewPort.width(),d=a.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){var c=this.attribute("width").toPixels("x"),d=this.attribute("height").toPixels("y"),e=0,f=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(e=-this.attribute("refX").toPixels("x"),f=-this.attribute("refY").toPixels("y")),b.beginPath(),b.moveTo(e,f),b.lineTo(c,f),b.lineTo(c,d),b.lineTo(e,d),b.closePath(),b.clip()}if(a.ViewPort.SetCurrent(c,d),this.attribute("viewBox").hasValue()){var e=a.ToNumberArray(this.attribute("viewBox").value),f=e[0],g=e[1],c=e[2],d=e[3];a.AspectRatio(b,this.attribute("preserveAspectRatio").value,a.ViewPort.width(),c,a.ViewPort.height(),d,f,g,this.attribute("refX").value,this.attribute("refY").value),a.ViewPort.RemoveCurrent(),a.ViewPort.SetCurrent(e[2],e[3])}}},a.Element.svg.prototype=new a.Element.RenderedElementBase,a.Element.rect=function(b){this.base=a.Element.PathElementBase,this.base(b),this.path=function(b){var c=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),e=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y"),g=this.attribute("rx").toPixels("x"),h=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(h=g),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(g=h),g=Math.min(g,e/2),h=Math.min(h,f/2),null!=b&&(b.beginPath(),b.moveTo(c+g,d),b.lineTo(c+e-g,d),b.quadraticCurveTo(c+e,d,c+e,d+h),b.lineTo(c+e,d+f-h),b.quadraticCurveTo(c+e,d+f,c+e-g,d+f),b.lineTo(c+g,d+f),b.quadraticCurveTo(c,d+f,c,d+f-h),b.lineTo(c,d+h),b.quadraticCurveTo(c,d,c+g,d),b.closePath()),new a.BoundingBox(c,d,c+e,d+f)}},a.Element.rect.prototype=new a.Element.PathElementBase,a.Element.circle=function(b){this.base=a.Element.PathElementBase,this.base(b),this.path=function(b){var c=this.attribute("cx").toPixels("x"),d=this.attribute("cy").toPixels("y"),e=this.attribute("r").toPixels();return null!=b&&(b.beginPath(),b.arc(c,d,e,0,2*Math.PI,!0),b.closePath()),new a.BoundingBox(c-e,d-e,c+e,d+e)}},a.Element.circle.prototype=new a.Element.PathElementBase,a.Element.ellipse=function(b){this.base=a.Element.PathElementBase,this.base(b),this.path=function(b){var c=4*((Math.sqrt(2)-1)/3),d=this.attribute("rx").toPixels("x"),e=this.attribute("ry").toPixels("y"),f=this.attribute("cx").toPixels("x"),g=this.attribute("cy").toPixels("y");return null!=b&&(b.beginPath(),b.moveTo(f,g-e),b.bezierCurveTo(f+c*d,g-e,f+d,g-c*e,f+d,g),b.bezierCurveTo(f+d,g+c*e,f+c*d,g+e,f,g+e),b.bezierCurveTo(f-c*d,g+e,f-d,g+c*e,f-d,g),b.bezierCurveTo(f-d,g-c*e,f-c*d,g-e,f,g-e),b.closePath()),new a.BoundingBox(f-d,g-e,f+d,g+e)}},a.Element.ellipse.prototype=new a.Element.PathElementBase,a.Element.line=function(b){this.base=a.Element.PathElementBase,this.base(b),this.getPoints=function(){return[new a.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new a.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(b){var c=this.getPoints();return null!=b&&(b.beginPath(),b.moveTo(c[0].x,c[0].y),b.lineTo(c[1].x,c[1].y)),new a.BoundingBox(c[0].x,c[0].y,c[1].x,c[1].y)},this.getMarkers=function(){var a=this.getPoints(),b=a[0].angleTo(a[1]);return[[a[0],b],[a[1],b]]}},a.Element.line.prototype=new a.Element.PathElementBase,a.Element.polyline=function(b){this.base=a.Element.PathElementBase,this.base(b),this.points=a.CreatePath(this.attribute("points").value),this.path=function(b){var c=new a.BoundingBox(this.points[0].x,this.points[0].y);null!=b&&(b.beginPath(),b.moveTo(this.points[0].x,this.points[0].y));for(var d=1;d<this.points.length;d++)c.addPoint(this.points[d].x,this.points[d].y),null!=b&&b.lineTo(this.points[d].x,this.points[d].y);return c},this.getMarkers=function(){for(var a=[],b=0;b<this.points.length-1;b++)a.push([this.points[b],this.points[b].angleTo(this.points[b+1])]);return a.push([this.points[this.points.length-1],a[a.length-1][1]]),a}},a.Element.polyline.prototype=new a.Element.PathElementBase,a.Element.polygon=function(b){this.base=a.Element.polyline,this.base(b),this.basePath=this.path,this.path=function(a){var b=this.basePath(a);return null!=a&&(a.lineTo(this.points[0].x,this.points[0].y),a.closePath()),b}},a.Element.polygon.prototype=new a.Element.polyline,a.Element.path=function(b){this.base=a.Element.PathElementBase,this.base(b),b=this.attribute("d").value,b=b.replace(/,/gm," "),b=b.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),b=b.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),b=b.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),b=b.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),b=b.replace(/([0-9])([+\-])/gm,"$1 $2"),b=b.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),b=b.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),b=a.compressSpaces(b),b=a.trim(b),this.PathParser=new function(b){this.tokens=b.split(" "),this.reset=function(){this.i=-1,this.previousCommand=this.command="",this.start=new a.Point(0,0),this.control=new a.Point(0,0),this.current=new a.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var b=new a.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(b)},this.getAsControlPoint=function(){var a=this.getPoint();return this.control=a},this.getAsCurrentPoint=function(){var a=this.getPoint();return this.current=a},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new a.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(a){return this.isRelativeCommand()&&(a.x+=this.current.x,a.y+=this.current.y),a},this.addMarker=function(a,b,c){null!=c&&0<this.angles.length&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(c)),this.addMarkerAngle(a,null==b?null:b.angleTo(a))},this.addMarkerAngle=function(a,b){this.points.push(a),this.angles.push(b)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var a=0;a<this.angles.length;a++)if(null==this.angles[a])for(var b=a+1;b<this.angles.length;b++)if(null!=this.angles[b]){this.angles[a]=this.angles[b];break}return this.angles}}(b),this.path=function(b){var c=this.PathParser;c.reset();var d=new a.BoundingBox;for(null!=b&&b.beginPath();!c.isEnd();)switch(c.nextCommand(),c.command){case"M":case"m":var e=c.getAsCurrentPoint();for(c.addMarker(e),d.addPoint(e.x,e.y),null!=b&&b.moveTo(e.x,e.y),c.start=c.current;!c.isCommandOrEnd();)e=c.getAsCurrentPoint(),c.addMarker(e,c.start),d.addPoint(e.x,e.y),null!=b&&b.lineTo(e.x,e.y);break;case"L":case"l":for(;!c.isCommandOrEnd();){var f=c.current,e=c.getAsCurrentPoint();c.addMarker(e,f),d.addPoint(e.x,e.y),null!=b&&b.lineTo(e.x,e.y)}break;case"H":case"h":for(;!c.isCommandOrEnd();)e=new a.Point((c.isRelativeCommand()?c.current.x:0)+c.getScalar(),c.current.y),c.addMarker(e,c.current),c.current=e,d.addPoint(c.current.x,c.current.y),null!=b&&b.lineTo(c.current.x,c.current.y);break;case"V":case"v":for(;!c.isCommandOrEnd();)e=new a.Point(c.current.x,(c.isRelativeCommand()?c.current.y:0)+c.getScalar()),c.addMarker(e,c.current),c.current=e,d.addPoint(c.current.x,c.current.y),null!=b&&b.lineTo(c.current.x,c.current.y);break;case"C":case"c":for(;!c.isCommandOrEnd();){var g=c.current,f=c.getPoint(),h=c.getAsControlPoint(),e=c.getAsCurrentPoint();c.addMarker(e,h,f),d.addBezierCurve(g.x,g.y,f.x,f.y,h.x,h.y,e.x,e.y),null!=b&&b.bezierCurveTo(f.x,f.y,h.x,h.y,e.x,e.y)}break;case"S":case"s":for(;!c.isCommandOrEnd();)g=c.current,f=c.getReflectedControlPoint(),h=c.getAsControlPoint(),e=c.getAsCurrentPoint(),c.addMarker(e,h,f),d.addBezierCurve(g.x,g.y,f.x,f.y,h.x,h.y,e.x,e.y),null!=b&&b.bezierCurveTo(f.x,f.y,h.x,h.y,e.x,e.y);break;case"Q":case"q":for(;!c.isCommandOrEnd();)g=c.current,h=c.getAsControlPoint(),e=c.getAsCurrentPoint(),c.addMarker(e,h,h),d.addQuadraticCurve(g.x,g.y,h.x,h.y,e.x,e.y),null!=b&&b.quadraticCurveTo(h.x,h.y,e.x,e.y);break;case"T":case"t":for(;!c.isCommandOrEnd();)g=c.current,h=c.getReflectedControlPoint(),c.control=h,e=c.getAsCurrentPoint(),c.addMarker(e,h,h),d.addQuadraticCurve(g.x,g.y,h.x,h.y,e.x,e.y),null!=b&&b.quadraticCurveTo(h.x,h.y,e.x,e.y);break;case"A":case"a":for(;!c.isCommandOrEnd();){var g=c.current,i=c.getScalar(),j=c.getScalar(),f=c.getScalar()*(Math.PI/180),k=c.getScalar(),h=c.getScalar(),e=c.getAsCurrentPoint(),l=new a.Point(Math.cos(f)*(g.x-e.x)/2+Math.sin(f)*(g.y-e.y)/2,-Math.sin(f)*(g.x-e.x)/2+Math.cos(f)*(g.y-e.y)/2),m=Math.pow(l.x,2)/Math.pow(i,2)+Math.pow(l.y,2)/Math.pow(j,2);1<m&&(i*=Math.sqrt(m),j*=Math.sqrt(m)),k=(k==h?-1:1)*Math.sqrt((Math.pow(i,2)*Math.pow(j,2)-Math.pow(i,2)*Math.pow(l.y,2)-Math.pow(j,2)*Math.pow(l.x,2))/(Math.pow(i,2)*Math.pow(l.y,2)+Math.pow(j,2)*Math.pow(l.x,2))),isNaN(k)&&(k=0);var n=new a.Point(k*i*l.y/j,k*-j*l.x/i),g=new a.Point((g.x+e.x)/2+Math.cos(f)*n.x-Math.sin(f)*n.y,(g.y+e.y)/2+Math.sin(f)*n.x+Math.cos(f)*n.y),o=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))},p=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(o(a)*o(b))},q=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(p(a,b))},k=q([1,0],[(l.x-n.x)/i,(l.y-n.y)/j]),m=[(l.x-n.x)/i,(l.y-n.y)/j],n=[(-l.x-n.x)/i,(-l.y-n.y)/j],l=q(m,n);-1>=p(m,n)&&(l=Math.PI),1<=p(m,n)&&(l=0),m=1-h?1:-1,n=k+l/2*m,q=new a.Point(g.x+i*Math.cos(n),g.y+j*Math.sin(n)),c.addMarkerAngle(q,n-m*Math.PI/2),c.addMarkerAngle(e,n-m*Math.PI),d.addPoint(e.x,e.y),null!=b&&(p=i>j?i:j,e=i>j?1:i/j,i=i>j?j/i:1,b.translate(g.x,g.y),b.rotate(f),b.scale(e,i),b.arc(0,0,p,k,k+l,1-h),b.scale(1/e,1/i),b.rotate(-f),b.translate(-g.x,-g.y))}break;case"Z":case"z":null!=b&&b.closePath(),c.current=c.start}return d},this.getMarkers=function(){for(var a=this.PathParser.getMarkerPoints(),b=this.PathParser.getMarkerAngles(),c=[],d=0;d<a.length;d++)c.push([a[d],b[d]]);return c}},a.Element.path.prototype=new a.Element.PathElementBase,a.Element.pattern=function(b){this.base=a.Element.ElementBase,this.base(b),this.createPattern=function(b,c){var d=this.attribute("width").toPixels("x",!0),e=this.attribute("height").toPixels("y",!0),f=new a.Element.svg;f.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value),f.attributes.width=new a.Property("width",d+"px"),f.attributes.height=new a.Property("height",e+"px"),f.attributes.transform=new a.Property("transform",this.attribute("patternTransform").value),f.children=this.children;var g=document.createElement("canvas");for(g.width=d,g.height=e,d=g.getContext("2d"),this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&d.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0)),e=-1;1>=e;e++)for(var h=-1;1>=h;h++)d.save(),d.translate(e*g.width,h*g.height),f.render(d),d.restore();return b.createPattern(g,"repeat")}},a.Element.pattern.prototype=new a.Element.ElementBase,a.Element.marker=function(b){this.base=a.Element.ElementBase,this.base(b),this.baseRender=this.render,this.render=function(b,c,d){b.translate(c.x,c.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&b.rotate(d),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&b.scale(b.lineWidth,b.lineWidth),b.save();var e=new a.Element.svg;e.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value),e.attributes.refX=new a.Property("refX",this.attribute("refX").value),e.attributes.refY=new a.Property("refY",this.attribute("refY").value),e.attributes.width=new a.Property("width",this.attribute("markerWidth").value),e.attributes.height=new a.Property("height",this.attribute("markerHeight").value),e.attributes.fill=new a.Property("fill",this.attribute("fill").valueOrDefault("black")),e.attributes.stroke=new a.Property("stroke",this.attribute("stroke").valueOrDefault("none")),e.children=this.children,e.render(b),b.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&b.scale(1/b.lineWidth,1/b.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&b.rotate(-d),b.translate(-c.x,-c.y)}},a.Element.marker.prototype=new a.Element.ElementBase,a.Element.defs=function(b){this.base=a.Element.ElementBase,this.base(b),this.render=function(a){}},a.Element.defs.prototype=new a.Element.ElementBase,a.Element.GradientBase=function(b){for(this.base=a.Element.ElementBase,this.base(b),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[],b=0;b<this.children.length;b++){var c=this.children[b];"stop"==c.type&&this.stops.push(c)}this.getGradient=function(){},this.createGradient=function(b,c,d){var e=this;this.getHrefAttribute().hasValue()&&(e=this.getHrefAttribute().getDefinition());var f=function(b){return d.hasValue()?new a.Property("color",b).addOpacity(d.value).value:b};if(b=this.getGradient(b,c),null==b)return f(e.stops[e.stops.length-1].color);for(c=0;c<e.stops.length;c++)b.addColorStop(e.stops[c].offset,f(e.stops[c].color));return this.attribute("gradientTransform").hasValue()?(e=a.ViewPort.viewPorts[0],f=new a.Element.rect,f.attributes.x=new a.Property("x",-a.MAX_VIRTUAL_PIXELS/3),f.attributes.y=new a.Property("y",-a.MAX_VIRTUAL_PIXELS/3),f.attributes.width=new a.Property("width",a.MAX_VIRTUAL_PIXELS),f.attributes.height=new a.Property("height",a.MAX_VIRTUAL_PIXELS),c=new a.Element.g,c.attributes.transform=new a.Property("transform",this.attribute("gradientTransform").value),c.children=[f],f=new a.Element.svg,f.attributes.x=new a.Property("x",0),f.attributes.y=new a.Property("y",0),f.attributes.width=new a.Property("width",e.width),f.attributes.height=new a.Property("height",e.height),f.children=[c],c=document.createElement("canvas"),c.width=e.width,c.height=e.height,e=c.getContext("2d"),e.fillStyle=b,f.render(e),e.createPattern(c,"no-repeat")):b}},a.Element.GradientBase.prototype=new a.Element.ElementBase,a.Element.linearGradient=function(b){this.base=a.Element.GradientBase,this.base(b),this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var d="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),e="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),f="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),c="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return d==f&&e==c?null:a.createLinearGradient(d,e,f,c)}},a.Element.linearGradient.prototype=new a.Element.GradientBase,a.Element.radialGradient=function(b){this.base=a.Element.GradientBase,this.base(b),this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var d="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),e="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),f=d,g=e;return this.attribute("fx").hasValue()&&(f="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(g="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y")),c="objectBoundingBox"==this.gradientUnits?(c.width()+c.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels(),a.createRadialGradient(f,g,0,d,e,c)}},a.Element.radialGradient.prototype=new a.Element.GradientBase,a.Element.stop=function(b){this.base=a.Element.ElementBase,this.base(b),this.offset=this.attribute("offset").numValue(),0>this.offset&&(this.offset=0),1<this.offset&&(this.offset=1),b=this.style("stop-color"),this.style("stop-opacity").hasValue()&&(b=b.addOpacity(this.style("stop-opacity").value)),this.color=b.value},a.Element.stop.prototype=new a.Element.ElementBase,a.Element.AnimateBase=function(b){this.base=a.Element.ElementBase,this.base(b),a.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var a=this.attribute("attributeType").value,b=this.attribute("attributeName").value;return"CSS"==a?this.parent.style(b,!0):this.parent.attribute(b,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(a){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed&&(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}return this.duration+=a,a=!1,this.begin<this.duration&&(a=this.calcValue(),this.attribute("type").hasValue()&&(a=this.attribute("type").value+"("+a+")"),this.getProperty().value=a,a=!0),a},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var b={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var c=b.progress*(this.values.value.length-1),d=Math.floor(c),e=Math.ceil(c);b.from=new a.Property("from",parseFloat(this.values.value[d])),b.to=new a.Property("to",parseFloat(this.values.value[e])),b.progress=(c-d)/(e-d)}else b.from=this.from,b.to=this.to;return b}},a.Element.AnimateBase.prototype=new a.Element.ElementBase,a.Element.animate=function(b){this.base=a.Element.AnimateBase,this.base(b),this.calcValue=function(){var a=this.progress();return a.from.numValue()+(a.to.numValue()-a.from.numValue())*a.progress+this.initialUnits}},a.Element.animate.prototype=new a.Element.AnimateBase,a.Element.animateColor=function(b){this.base=a.Element.AnimateBase,this.base(b),this.calcValue=function(){var a=this.progress(),b=new RGBColor(a.from.value),c=new RGBColor(a.to.value);if(b.ok&&c.ok){var d=b.g+(c.g-b.g)*a.progress,e=b.b+(c.b-b.b)*a.progress;return"rgb("+parseInt(b.r+(c.r-b.r)*a.progress,10)+","+parseInt(d,10)+","+parseInt(e,10)+")"}return this.attribute("from").value}},a.Element.animateColor.prototype=new a.Element.AnimateBase,a.Element.animateTransform=function(b){this.base=a.Element.AnimateBase,this.base(b),this.calcValue=function(){for(var b=this.progress(),c=a.ToNumberArray(b.from.value),d=a.ToNumberArray(b.to.value),e="",f=0;f<c.length;f++)e+=c[f]+(d[f]-c[f])*b.progress+" ";return e}},a.Element.animateTransform.prototype=new a.Element.animate,a.Element.font=function(b){for(this.base=a.Element.ElementBase,this.base(b),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isArabic=this.isRTL=!1,this.missingGlyph=this.fontFace=null,this.glyphs=[],b=0;b<this.children.length;b++){var c=this.children[b];"font-face"==c.type?(this.fontFace=c,c.style("font-family").hasValue()&&(a.Definitions[c.style("font-family").value]=this)):"missing-glyph"==c.type?this.missingGlyph=c:"glyph"==c.type&&(""!=c.arabicForm?(this.isArabic=this.isRTL=!0,"undefined"==typeof this.glyphs[c.unicode]&&(this.glyphs[c.unicode]=[]),this.glyphs[c.unicode][c.arabicForm]=c):this.glyphs[c.unicode]=c)}},a.Element.font.prototype=new a.Element.ElementBase,a.Element.fontface=function(b){this.base=a.Element.ElementBase,this.base(b),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},a.Element.fontface.prototype=new a.Element.ElementBase,a.Element.missingglyph=function(b){this.base=a.Element.path,this.base(b),this.horizAdvX=0},a.Element.missingglyph.prototype=new a.Element.path,a.Element.glyph=function(b){this.base=a.Element.path,this.base(b),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},a.Element.glyph.prototype=new a.Element.path,a.Element.text=function(b){this.captureTextNodes=!0,this.base=a.Element.RenderedElementBase,this.base(b),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.style("dominant-baseline").hasValue()&&(a.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(a.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new a.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(a){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(a,this,0);for(var b=0;b<this.children.length;b++)this.renderChild(a,this,b)},this.getAnchorDelta=function(a,b,c){var d=this.style("text-anchor").valueOrDefault("start");if("start"!=d){for(var e=0,f=c;f<b.children.length;f++){var g=b.children[f];if(f>c&&g.attribute("x").hasValue())break;e+=g.measureTextRecursive(a)}return-1*("end"==d?e:e/2)}return 0},this.renderChild=function(a,b,c){var d=b.children[c];for(d.attribute("x").hasValue()?d.x=d.attribute("x").toPixels("x")+this.getAnchorDelta(a,b,c):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),d.attribute("dx").hasValue()&&(this.x+=d.attribute("dx").toPixels("x")),d.x=this.x),this.x=d.x+d.measureText(a),d.attribute("y").hasValue()?d.y=d.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),d.attribute("dy").hasValue()&&(this.y+=d.attribute("dy").toPixels("y")),d.y=this.y),this.y=d.y,d.render(a),c=0;c<d.children.length;c++)this.renderChild(a,d,c)}},a.Element.text.prototype=new a.Element.RenderedElementBase,a.Element.TextElementBase=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.getGlyph=function(a,b,c){var d=b[c],e=null;if(a.isArabic){var f="isolated";(0==c||" "==b[c-1])&&c<b.length-2&&" "!=b[c+1]&&(f="terminal"),0<c&&" "!=b[c-1]&&c<b.length-2&&" "!=b[c+1]&&(f="medial"),0<c&&" "!=b[c-1]&&(c==b.length-1||" "==b[c+1])&&(f="initial"),"undefined"!=typeof a.glyphs[d]&&(e=a.glyphs[d][f],null==e&&"glyph"==a.glyphs[d].type&&(e=a.glyphs[d]))}else e=a.glyphs[d];return null==e&&(e=a.missingGlyph),e},this.renderChildren=function(b){var c=this.parent.style("font-family").getDefinition();if(null!=c){var d=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),e=this.parent.style("font-style").valueOrDefault(a.Font.Parse(a.ctx.font).fontStyle),f=this.getText();c.isRTL&&(f=f.split("").reverse().join(""));for(var g=a.ToNumberArray(this.parent.attribute("dx").value),h=0;h<f.length;h++){var i=this.getGlyph(c,f,h),j=d/c.fontFace.unitsPerEm;b.translate(this.x,this.y),b.scale(j,-j);var k=b.lineWidth;b.lineWidth=b.lineWidth*c.fontFace.unitsPerEm/d,"italic"==e&&b.transform(1,0,.4,1,0,0),i.render(b),"italic"==e&&b.transform(1,0,-.4,1,0,0),b.lineWidth=k,b.scale(1/j,-1/j),b.translate(-this.x,-this.y),this.x+=d*(i.horizAdvX||c.horizAdvX)/c.fontFace.unitsPerEm,"undefined"==typeof g[h]||isNaN(g[h])||(this.x+=g[h])}}else""!=b.fillStyle&&b.fillText(a.compressSpaces(this.getText()),this.x,this.y),""!=b.strokeStyle&&b.strokeText(a.compressSpaces(this.getText()),this.x,this.y)},this.getText=function(){},this.measureTextRecursive=function(a){for(var b=this.measureText(a),c=0;c<this.children.length;c++)b+=this.children[c].measureTextRecursive(a);return b},this.measureText=function(b){var c=this.parent.style("font-family").getDefinition();if(null!=c){b=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize);var d=0,e=this.getText();c.isRTL&&(e=e.split("").reverse().join(""));for(var f=a.ToNumberArray(this.parent.attribute("dx").value),g=0;g<e.length;g++){var h=this.getGlyph(c,e,g),d=d+(h.horizAdvX||c.horizAdvX)*b/c.fontFace.unitsPerEm;"undefined"==typeof f[g]||isNaN(f[g])||(d+=f[g])}return d}return c=a.compressSpaces(this.getText()),b.measureText?(b.save(),this.setContext(b),c=b.measureText(c).width,b.restore(),c):10*c.length}},a.Element.TextElementBase.prototype=new a.Element.RenderedElementBase,a.Element.tspan=function(b){this.captureTextNodes=!0,this.base=a.Element.TextElementBase,this.base(b),this.text=b.nodeValue||b.text||"",this.getText=function(){return this.text}},a.Element.tspan.prototype=new a.Element.TextElementBase,a.Element.tref=function(b){this.base=a.Element.TextElementBase,this.base(b),this.getText=function(){var a=this.getHrefAttribute().getDefinition();if(null!=a)return a.children[0].getText()}},a.Element.tref.prototype=new a.Element.TextElementBase,a.Element.a=function(b){this.base=a.Element.TextElementBase,this.base(b),this.hasText=!0;for(var c=0;c<b.childNodes.length;c++)3!=b.childNodes[c].nodeType&&(this.hasText=!1);this.text=this.hasText?b.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(b){if(this.hasText){this.baseRenderChildren(b);var c=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);a.Mouse.checkBoundingBox(this,new a.BoundingBox(this.x,this.y-c.toPixels("y"),this.x+this.measureText(b),this.y))}else c=new a.Element.g,c.children=this.children,c.parent=this,c.render(b)},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){a.ctx.canvas.style.cursor="pointer"}},a.Element.a.prototype=new a.Element.TextElementBase,a.Element.image=function(b){this.base=a.Element.RenderedElementBase,this.base(b);var c=this.getHrefAttribute().value,d=c.match(/\.svg$/);if(a.Images.push(this),this.loaded=!1,d)this.img=a.ajax(c),this.loaded=!0;else{this.img=document.createElement("img");var e=this;this.img.onload=function(){e.loaded=!0},this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+c+'" not found'),e.loaded=!0)},this.img.src=c}this.renderChildren=function(b){var c=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");0!=f&&0!=g&&(b.save(),d?b.drawSvg(this.img,c,e,f,g):(b.translate(c,e),a.AspectRatio(b,this.attribute("preserveAspectRatio").value,f,this.img.width,g,this.img.height,0,0),b.drawImage(this.img,0,0)),b.restore())},this.getBoundingBox=function(){var b=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),d=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y");return new a.BoundingBox(b,c,b+d,c+e)}},a.Element.image.prototype=new a.Element.RenderedElementBase,a.Element.g=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.getBoundingBox=function(){for(var b=new a.BoundingBox,c=0;c<this.children.length;c++)b.addBoundingBox(this.children[c].getBoundingBox());return b}},a.Element.g.prototype=new a.Element.RenderedElementBase,a.Element.symbol=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.baseSetContext=this.setContext,this.setContext=function(b){if(this.baseSetContext(b),this.attribute("viewBox").hasValue()){var c=a.ToNumberArray(this.attribute("viewBox").value),d=c[0],e=c[1];width=c[2],height=c[3],a.AspectRatio(b,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,d,e),a.ViewPort.SetCurrent(c[2],c[3])}}},a.Element.symbol.prototype=new a.Element.RenderedElementBase,a.Element.style=function(b){this.base=a.Element.ElementBase,this.base(b);for(var c="",d=0;d<b.childNodes.length;d++)c+=b.childNodes[d].nodeValue;for(c=c.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),c=a.compressSpaces(c),b=c.split("}"),d=0;d<b.length;d++)if(""!=a.trim(b[d]))for(var e=b[d].split("{"),c=e[0].split(","),e=e[1].split(";"),f=0;f<c.length;f++){var g=a.trim(c[f]);if(""!=g){for(var h={},i=0;i<e.length;i++){var j=e[i].indexOf(":"),k=e[i].substr(0,j),j=e[i].substr(j+1,e[i].length-j);null!=k&&null!=j&&(h[a.trim(k)]=new a.Property(a.trim(k),a.trim(j)))}if(a.Styles[g]=h,"@font-face"==g)for(g=h["font-family"].value.replace(/"/g,""),h=h.src.value.split(","),i=0;i<h.length;i++)if(0<h[i].indexOf('format("svg")'))for(k=h[i].indexOf("url"),j=h[i].indexOf(")",k),k=h[i].substr(k+5,j-k-6),k=a.parseXml(a.ajax(k)).getElementsByTagName("font"),j=0;j<k.length;j++){var l=a.CreateElement(k[j]);a.Definitions[g]=l}}}},a.Element.style.prototype=new a.Element.ElementBase,a.Element.use=function(b){this.base=a.Element.RenderedElementBase,
this.base(b),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var a=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(a.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(a.attribute("height",!0).value=this.attribute("height").value),a},this.path=function(a){var b=this.getDefinition();null!=b&&b.path(a)},this.getBoundingBox=function(){var a=this.getDefinition();if(null!=a)return a.getBoundingBox()},this.renderChildren=function(a){var b=this.getDefinition();if(null!=b){var c=b.parent;b.parent=null,b.render(a),b.parent=c}}},a.Element.use.prototype=new a.Element.RenderedElementBase,a.Element.mask=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(b,c){var d=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");if(0==f&&0==g){for(g=new a.BoundingBox,d=0;d<this.children.length;d++)g.addBoundingBox(this.children[d].getBoundingBox());d=Math.floor(g.x1),e=Math.floor(g.y1),f=Math.floor(g.width()),g=Math.floor(g.height())}var h=c.attribute("mask").value;c.attribute("mask").value="";var i=document.createElement("canvas");i.width=d+f,i.height=e+g;var j=i.getContext("2d");this.renderChildren(j);var k=document.createElement("canvas");k.width=d+f,k.height=e+g;var l=k.getContext("2d");c.render(l),l.globalCompositeOperation="destination-in",l.fillStyle=j.createPattern(i,"no-repeat"),l.fillRect(0,0,d+f,e+g),b.fillStyle=l.createPattern(k,"no-repeat"),b.fillRect(0,0,d+f,e+g),c.attribute("mask").value=h},this.render=function(a){}},a.Element.mask.prototype=new a.Element.ElementBase,a.Element.clipPath=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(b){for(var c=0;c<this.children.length;c++){var d=this.children[c];if("undefined"!=typeof d.path){var e=null;d.attribute("transform").hasValue()&&(e=new a.Transform(d.attribute("transform").value),e.apply(b)),d.path(b),b.clip(),e&&e.unapply(b)}}},this.render=function(a){}},a.Element.clipPath.prototype=new a.Element.ElementBase,a.Element.filter=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(a,b){var c=b.getBoundingBox(),d=Math.floor(c.x1),e=Math.floor(c.y1),f=Math.floor(c.width()),c=Math.floor(c.height()),g=b.style("filter").value;b.style("filter").value="";for(var h=0,i=0,j=0;j<this.children.length;j++)var k=this.children[j].extraFilterDistance||0,h=Math.max(h,k),i=Math.max(i,k);k=document.createElement("canvas"),k.width=f+2*h,k.height=c+2*i;var l=k.getContext("2d");for(l.translate(-d+h,-e+i),b.render(l),j=0;j<this.children.length;j++)this.children[j].apply(l,0,0,f+2*h,c+2*i);a.drawImage(k,0,0,f+2*h,c+2*i,d-h,e-i,f+2*h,c+2*i),b.style("filter",!0).value=g},this.render=function(a){}},a.Element.filter.prototype=new a.Element.ElementBase,a.Element.feMorphology=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(a,b,c,d,e){}},a.Element.feMorphology.prototype=new a.Element.ElementBase,a.Element.feColorMatrix=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(a,b,c,d,e){var f=a.getImageData(0,0,d,e);for(c=0;c<e;c++)for(b=0;b<d;b++){var g=(f.data[c*d*4+4*b+0]+f.data[c*d*4+4*b+1]+f.data[c*d*4+4*b+2])/3;f.data[c*d*4+4*b+0]=g,f.data[c*d*4+4*b+1]=g,f.data[c*d*4+4*b+2]=g}a.clearRect(0,0,d,e),a.putImageData(f,0,0)}},a.Element.feColorMatrix.prototype=new a.Element.ElementBase,a.Element.feGaussianBlur=function(b){this.base=a.Element.ElementBase,this.base(b),this.extraFilterDistance=this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.apply=function(b,c,d,e,f){"undefined"==typeof stackBlurCanvasRGBA?"undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work"):(b.canvas.id=a.UniqueId(),b.canvas.style.display="none",document.body.appendChild(b.canvas),stackBlurCanvasRGBA(b.canvas.id,c,d,e,f,this.blurRadius),document.body.removeChild(b.canvas))}},a.Element.feGaussianBlur.prototype=new a.Element.ElementBase,a.Element.title=function(a){},a.Element.title.prototype=new a.Element.ElementBase,a.Element.desc=function(a){},a.Element.desc.prototype=new a.Element.ElementBase,a.Element.MISSING=function(a){"undefined"!=typeof console&&console.log("ERROR: Element '"+a.nodeName+"' not yet implemented.")},a.Element.MISSING.prototype=new a.Element.ElementBase,a.CreateElement=function(b){var c=b.nodeName.replace(/^[^:]+:/,""),c=c.replace(/\-/g,""),d=null,d="undefined"!=typeof a.Element[c]?new a.Element[c](b):new a.Element.MISSING(b);return d.type=b.nodeName,d},a.load=function(b,c){a.loadXml(b,a.ajax(c))},a.loadXml=function(b,c){a.loadXmlDoc(b,a.parseXml(c))},a.loadXmlDoc=function(b,c){a.init(b);var d=function(a){for(var c=b.canvas;c;)a.x-=c.offsetLeft,a.y-=c.offsetTop,c=c.offsetParent;return window.scrollX&&(a.x+=window.scrollX),window.scrollY&&(a.y+=window.scrollY),a};1!=a.opts.ignoreMouse&&(b.canvas.onclick=function(b){b=d(new a.Point(null!=b?b.clientX:event.clientX,null!=b?b.clientY:event.clientY)),a.Mouse.onclick(b.x,b.y)},b.canvas.onmousemove=function(b){b=d(new a.Point(null!=b?b.clientX:event.clientX,null!=b?b.clientY:event.clientY)),a.Mouse.onmousemove(b.x,b.y)});var e=a.CreateElement(c.documentElement),f=e.root=!0,g=function(){a.ViewPort.Clear(),b.canvas.parentNode&&a.ViewPort.SetCurrent(b.canvas.parentNode.clientWidth,b.canvas.parentNode.clientHeight),1!=a.opts.ignoreDimensions&&(e.style("width").hasValue()&&(b.canvas.width=e.style("width").toPixels("x"),b.canvas.style.width=b.canvas.width+"px"),e.style("height").hasValue()&&(b.canvas.height=e.style("height").toPixels("y"),b.canvas.style.height=b.canvas.height+"px"));var d=b.canvas.clientWidth||b.canvas.width,g=b.canvas.clientHeight||b.canvas.height;if(1==a.opts.ignoreDimensions&&e.style("width").hasValue()&&e.style("height").hasValue()&&(d=e.style("width").toPixels("x"),g=e.style("height").toPixels("y")),a.ViewPort.SetCurrent(d,g),null!=a.opts.offsetX&&(e.attribute("x",!0).value=a.opts.offsetX),null!=a.opts.offsetY&&(e.attribute("y",!0).value=a.opts.offsetY),null!=a.opts.scaleWidth&&null!=a.opts.scaleHeight){var h=1,i=1,j=a.ToNumberArray(e.attribute("viewBox").value);e.attribute("width").hasValue()?h=e.attribute("width").toPixels("x")/a.opts.scaleWidth:isNaN(j[2])||(h=j[2]/a.opts.scaleWidth),e.attribute("height").hasValue()?i=e.attribute("height").toPixels("y")/a.opts.scaleHeight:isNaN(j[3])||(i=j[3]/a.opts.scaleHeight),e.attribute("width",!0).value=a.opts.scaleWidth,e.attribute("height",!0).value=a.opts.scaleHeight,e.attribute("viewBox",!0).value="0 0 "+d*h+" "+g*i,e.attribute("preserveAspectRatio",!0).value="none"}1!=a.opts.ignoreClear&&b.clearRect(0,0,d,g),e.render(b),f&&(f=!1,"function"==typeof a.opts.renderCallback&&a.opts.renderCallback(c))},h=!0;a.ImagesLoaded()&&(h=!1,g()),a.intervalID=setInterval(function(){var b=!1;if(h&&a.ImagesLoaded()&&(h=!1,b=!0),1!=a.opts.ignoreMouse&&(b|=a.Mouse.hasEvents()),1!=a.opts.ignoreAnimation)for(var c=0;c<a.Animations.length;c++)b|=a.Animations[c].update(1e3/a.FRAMERATE);"function"==typeof a.opts.forceRedraw&&1==a.opts.forceRedraw()&&(b=!0),b&&(g(),a.Mouse.runEvents())},1e3/a.FRAMERATE)},a.stop=function(){a.intervalID&&clearInterval(a.intervalID)},a.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(a,b){this.events.push({type:"onclick",x:a,y:b,run:function(a){a.onclick&&a.onclick()}})},this.onmousemove=function(a,b){this.events.push({type:"onmousemove",x:a,y:b,run:function(a){a.onmousemove&&a.onmousemove()}})},this.eventElements=[],this.checkPath=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInPath&&b.isPointInPath(d.x,d.y)&&(this.eventElements[c]=a)}},this.checkBoundingBox=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInBox(d.x,d.y)&&(this.eventElements[c]=a)}},this.runEvents=function(){a.ctx.canvas.style.cursor="";for(var b=0;b<this.events.length;b++)for(var c=this.events[b],d=this.eventElements[b];d;)c.run(d),d=d.parent;this.events=[],this.eventElements=[]}},a}this.canvg=function(b,c,d){if(null==b&&null==c&&null==d){c=document.getElementsByTagName("svg");for(var e=0;e<c.length;e++){b=c[e],d=document.createElement("canvas"),d.width=b.clientWidth,d.height=b.clientHeight,b.parentNode.insertBefore(d,b),b.parentNode.removeChild(b);var f=document.createElement("div");f.appendChild(b),canvg(d,f.innerHTML)}}else d=d||{},"string"==typeof b&&(b=document.getElementById(b)),null!=b.svg&&b.svg.stop(),e=a(),1==b.childNodes.length&&"OBJECT"==b.childNodes[0].nodeName||(b.svg=e),e.opts=d,b=b.getContext("2d"),"undefined"!=typeof c.documentElement?e.loadXmlDoc(b,c):"<"==c.substr(0,1)?e.loadXml(b,c):e.load(b,c)}}(),"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(a,b,c,d,e){canvg(this.canvas,a,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:b,offsetY:c,scaleWidth:d,scaleHeight:e})}),AmCharts.isModern){var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){var b=a.document,c=a.URL||a.webkitURL||a,d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e=!a.externalHost&&"download"in d,f=a.webkitRequestFileSystem,g=a.requestFileSystem||f||a.mozRequestFileSystem,h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},i=0,j=[],k=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(a){h(a)}}},l=function(c,h){var o,p,v,l=this,m=c.type,n=!1,q=function(){var b=(a.URL||a.webkitURL||a).createObjectURL(c);return j.push(b),b},r=function(){k(l,["writestart","progress","write","writeend"])},s=function(){!n&&o||(o=q(c)),p?p.location.href=o:window.open(o,"_blank"),l.readyState=l.DONE,r()},t=function(a){return function(){if(l.readyState!==l.DONE)return a.apply(this,arguments)}},u={create:!0,exclusive:!1};l.readyState=l.INIT,h||(h="download"),e?(o=q(c),b=a.document,d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),d.href=o,d.download=h,m=b.createEvent("MouseEvents"),m.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(m),l.readyState=l.DONE,r()):(a.chrome&&m&&"application/octet-stream"!==m&&(v=c.slice||c.webkitSlice,c=v.call(c,0,c.size,"application/octet-stream"),n=!0),f&&"download"!==h&&(h+=".download"),("application/octet-stream"===m||f)&&(p=a),g?(i+=c.size,g(a.TEMPORARY,i,t(function(a){a.root.getDirectory("saved",u,t(function(a){var b=function(){a.getFile(h,u,t(function(a){a.createWriter(t(function(b){b.onwriteend=function(b){p.location.href=a.toURL(),j.push(a),l.readyState=l.DONE,k(l,"writeend",b)},b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&s()},["writestart","progress","write","abort"].forEach(function(a){b["on"+a]=l["on"+a]}),b.write(c),l.abort=function(){b.abort(),l.readyState=l.DONE},l.readyState=l.WRITING}),s)}),s)};a.getFile(h,{create:!1},t(function(a){a.remove(),b()}),t(function(a){a.code===a.NOT_FOUND_ERR?b():s()}))}),s)}),s)):s())},m=l.prototype;return m.abort=function(){this.readyState=this.DONE,k(this,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,a.addEventListener("unload",function(){for(var a=j.length;a--;){var b=j[a];"string"==typeof b?c.revokeObjectURL(b):b.remove()}j.length=0},!1),function(a,b){return new l(a,b)}}(this.self||this.window||this.content);"undefined"!=typeof module&&(module.exports=saveAs)}var jsPDF=function(){function a(d,e,f,g){d="undefined"==typeof d?"p":d.toString().toLowerCase(),"undefined"==typeof e&&(e="mm"),"undefined"==typeof f&&(f="a4"),"undefined"==typeof g&&"undefined"==typeof zpipe&&(g=!1);var h=f.toString().toLowerCase(),i=[],j=0,k=g;g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224]};var u,v,w,x,D,J,K,L,l="0 g",m=0,n=[],o=2,p=!1,q=[],r={},s={},t=16,y={title:"",subject:"",author:"",keywords:"",creator:""},z=0,A=0,B={},C=new c(B),E=function(a){return a.toFixed(2)},F=function(a){var b=a.toFixed(0);return 10>a?"0"+b:b},G=function(a){p?n[m].push(a):(i.push(a),j+=a.length+1)},H=function(){return o++,q[o]=j,G(o+" 0 obj"),o},I=function(a){G("stream"),G(a),G("endstream")},M=function(a,b){var c;c=a;var e,f,g,h,i,j,d=b;if(void 0===d&&(d={}),e=d.sourceEncoding?e:"Unicode",g=d.outputEncoding,(d.autoencode||g)&&r[u].metadata&&r[u].metadata[e]&&r[u].metadata[e].encoding&&(e=r[u].metadata[e].encoding,!g&&r[u].encoding&&(g=r[u].encoding),!g&&e.codePages&&(g=e.codePages[0]),"string"==typeof g&&(g=e[g]),g)){for(i=!1,h=[],e=0,f=c.length;e<f;e++)(j=g[c.charCodeAt(e)])?h.push(String.fromCharCode(j)):h.push(c[e]),h[e].charCodeAt(0)>>8&&(i=!0);c=h.join("")}for(e=c.length;void 0===i&&0!==e;)c.charCodeAt(e-1)>>8&&(i=!0),e--;if(i){for(h=d.noBOM?[]:[254,255],e=0,f=c.length;e<f;e++){if(j=c.charCodeAt(e),d=j>>8,d>>8)throw Error("Character at position "+e.toString(10)+" of string '"+c+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");h.push(d),h.push(j-(d<<8))}c=String.fromCharCode.apply(void 0,h)}return c.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},N=function(){m++,p=!0,n[m]=[],G(E(.200025*x)+" w"),G("0 G"),0!==z&&G(z.toString(10)+" J"),0!==A&&G(A.toString(10)+" j"),C.publish("addPage",{pageNumber:m})},O=function(a,b){var c;void 0===a&&(a=r[u].fontName),void 0===b&&(b=r[u].fontStyle);try{c=s[a][b]}catch(a){c=void 0}if(!c)throw Error("Unable to look up font label for font '"+a+"', '"+b+"'. Refer to getFontList() for available fonts.");return c},P=function(){p=!1,i=[],q=[],G("%PDF-1.3"),J=w*x,K=v*x;var a,b,c,d,e;for(a=1;a<=m;a++){if(H(),G("<</Type /Page"),G("/Parent 1 0 R"),G("/Resources 2 0 R"),G("/Contents "+(o+1)+" 0 R>>"),G("endobj"),b=n[a].join("\n"),H(),k){for(c=[],d=0;d<b.length;++d)c[d]=b.charCodeAt(d);e=adler32cs.from(b),b=new Deflater(6),b.append(new Uint8Array(c)),b=b.flush(),c=[new Uint8Array([120,156]),new Uint8Array(b),new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])],b="";for(d in c)c.hasOwnProperty(d)&&(b+=String.fromCharCode.apply(null,c[d]));G("<</Length "+b.length+" /Filter [/FlateDecode]>>")}else G("<</Length "+b.length+">>");I(b),G("endobj")}for(q[1]=j,G("1 0 obj"),G("<</Type /Pages"),L="/Kids [",d=0;d<m;d++)L+=3+2*d+" 0 R ";G(L+"]"),G("/Count "+m),G("/MediaBox [0 0 "+E(J)+" "+E(K)+"]"),G(">>"),G("endobj");for(var f in r)r.hasOwnProperty(f)&&(a=r[f],a.objectNumber=H(),G("<</BaseFont/"+a.PostScriptName+"/Type/Font"),"string"==typeof a.encoding&&G("/Encoding/"+a.encoding),G("/Subtype/Type1>>"),G("endobj"));C.publish("putResources"),q[2]=j,G("2 0 obj"),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),G("/Font <<");for(var g in r)r.hasOwnProperty(g)&&G("/"+g+" "+r[g].objectNumber+" 0 R");for(G(">>"),G("/XObject <<"),C.publish("putXobjectDict"),G(">>"),G(">>"),G("endobj"),C.publish("postPutResources"),H(),G("<<"),G("/Producer (jsPDF 0.9.0rc2)"),y.title&&G("/Title ("+M(y.title)+")"),y.subject&&G("/Subject ("+M(y.subject)+")"),y.author&&G("/Author ("+M(y.author)+")"),y.keywords&&G("/Keywords ("+M(y.keywords)+")"),y.creator&&G("/Creator ("+M(y.creator)+")"),f=new Date,G("/CreationDate (D:"+[f.getFullYear(),F(f.getMonth()+1),F(f.getDate()),F(f.getHours()),F(f.getMinutes()),F(f.getSeconds())].join("")+")"),G(">>"),G("endobj"),H(),G("<<"),G("/Type /Catalog"),G("/Pages 1 0 R"),G("/OpenAction [3 0 R /FitH null]"),G("/PageLayout /OneColumn"),C.publish("putCatalog"),G(">>"),G("endobj"),f=j,G("xref"),G("0 "+(o+1)),G("0000000000 65535 f "),g=1;g<=o;g++)a=q[g].toFixed(0),a=10>a.length?Array(11-a.length).join("0")+a:a,G(a+" 00000 n ");return G("trailer"),G("<<"),G("/Size "+(o+1)),G("/Root "+o+" 0 R"),G("/Info "+(o-1)+" 0 R"),G(">>"),G("startxref"),G(f),G("%%EOF"),p=!0,i.join("\n")},Q=function(a){var b="S";return"F"===a?b="f":"FD"!==a&&"DF"!==a||(b="B"),b},R=function(a,b){var c,d,e,f;switch(a){case void 0:return P();case"save":if(navigator.getUserMedia&&(void 0===window.URL||void 0===window.URL.createObjectURL))return B.output("dataurlnewwindow");for(c=P(),d=c.length,e=new Uint8Array(new ArrayBuffer(d)),f=0;f<d;f++)e[f]=c.charCodeAt(f);c=new Blob([e],{type:"application/pdf"}),saveAs(c,b);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(P());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(P());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(P()));break;default:throw Error('Output type "'+a+'" is not supported.')}};if("pt"===e)x=1;else if("mm"===e)x=72/25.4;else if("cm"===e)x=72/2.54;else{if("in"!==e)throw"Invalid unit: "+e;x=72}if(g.hasOwnProperty(h))v=g[h][1]/x,w=g[h][0]/x;else try{v=f[1],w=f[0]}catch(a){throw"Invalid format: "+f}if("p"===d||"portrait"===d)d="p",w>v&&(d=w,w=v,v=d);else{if("l"!==d&&"landscape"!==d)throw"Invalid orientation: "+d;d="l",v>w&&(d=w,w=v,v=d)}B.internal={pdfEscape:M,getStyle:Q,getFont:function(){return r[O.apply(B,arguments)]},getFontSize:function(){return t},getLineHeight:function(){return 1.15*t},btoa:btoa,write:function(a,b,c,d){G(1===arguments.length?a:Array.prototype.join.call(arguments," "))},getCoordinateString:function(a){return E(a*x)},getVerticalCoordinateString:function(a){return E((v-a)*x)},collections:{},newObject:H,putStream:I,events:C,scaleFactor:x,pageSize:{width:w,height:v},output:function(a,b){return R(a,b)},getNumberOfPages:function(){return n.length-1},pages:n},B.addPage=function(){return N(),this},B.text=function(a,b,c,d){var e,f;if("number"==typeof a&&(e=a,f=b,a=c,b=e,c=f),"string"==typeof a&&a.match(/[\n\r]/)&&(a=a.split(/\r\n|\r|\n/g)),"undefined"==typeof d?d={noBOM:!0,autoencode:!0}:(void 0===d.noBOM&&(d.noBOM=!0),void 0===d.autoencode&&(d.autoencode=!0)),"string"==typeof a)d=M(a,d);else{if(!(a instanceof Array))throw Error('Type of text must be string or Array. "'+a+'" is not recognized.');for(a=a.concat(),e=a.length-1;-1!==e;e--)a[e]=M(a[e],d);d=a.join(") Tj\nT* (")}return G("BT\n/"+u+" "+t+" Tf\n"+1.15*t+" TL\n"+l+"\n"+E(b*x)+" "+E((v-c)*x)+" Td\n("+d+") Tj\nET"),this},B.line=function(a,b,c,d){return G(E(a*x)+" "+E((v-b)*x)+" m "+E(c*x)+" "+E((v-d)*x)+" l S"),this},B.lines=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n;for("number"==typeof a&&(g=a,h=b,a=c,b=g,c=h),e=Q(e),d=void 0===d?[1,1]:d,G((b*x).toFixed(3)+" "+((v-c)*x).toFixed(3)+" m "),g=d[0],d=d[1],h=a.length,n=c,c=0;c<h;c++)i=a[c],2===i.length?(b=i[0]*g+b,n=i[1]*d+n,G((b*x).toFixed(3)+" "+((v-n)*x).toFixed(3)+" l")):(j=i[0]*g+b,k=i[1]*d+n,l=i[2]*g+b,m=i[3]*d+n,b=i[4]*g+b,n=i[5]*d+n,G((j*x).toFixed(3)+" "+((v-k)*x).toFixed(3)+" "+(l*x).toFixed(3)+" "+((v-m)*x).toFixed(3)+" "+(b*x).toFixed(3)+" "+((v-n)*x).toFixed(3)+" c"));return 1==f&&G(" h"),G(e),this},B.rect=function(a,b,c,d,e){return e=Q(e),G([E(a*x),E((v-b)*x),E(c*x),E(-d*x),"re",e].join(" ")),this},B.triangle=function(a,b,c,d,e,f,g){return this.lines([[c-a,d-b],[e-c,f-d],[a-e,b-f]],a,b,[1,1],g,!0),this},B.roundedRect=function(a,b,c,d,e,f,g){var h=4/3*(Math.SQRT2-1);return this.lines([[c-2*e,0],[e*h,0,e,f-f*h,e,f],[0,d-2*f],[0,f*h,-(e*h),f,-e,f],[-c+2*e,0],[-(e*h),0,-e,-(f*h),-e,-f],[0,-d+2*f],[0,-(f*h),e*h,-f,e,-f]],a+e,b,[1,1],g),this},B.ellipse=function(a,b,c,d,e){e=Q(e);var f=4/3*(Math.SQRT2-1)*c,g=4/3*(Math.SQRT2-1)*d;return G([E((a+c)*x),E((v-b)*x),"m",E((a+c)*x),E((v-(b-g))*x),E((a+f)*x),E((v-(b-d))*x),E(a*x),E((v-(b-d))*x),"c"].join(" ")),G([E((a-f)*x),E((v-(b-d))*x),E((a-c)*x),E((v-(b-g))*x),E((a-c)*x),E((v-b)*x),"c"].join(" ")),G([E((a-c)*x),E((v-(b+g))*x),E((a-f)*x),E((v-(b+d))*x),E(a*x),E((v-(b+d))*x),"c"].join(" ")),G([E((a+f)*x),E((v-(b+d))*x),E((a+c)*x),E((v-(b+g))*x),E((a+c)*x),E((v-b)*x),"c",e].join(" ")),this},B.circle=function(a,b,c,d){return this.ellipse(a,b,c,c,d)},B.setProperties=function(a){for(var b in y)y.hasOwnProperty(b)&&a[b]&&(y[b]=a[b]);return this},B.setFontSize=function(a){return t=a,this},B.setFont=function(a,b){return u=O(a,b),this},B.setFontStyle=B.setFontType=function(a){return u=O(void 0,a),this},B.getFontList=function(){var b,c,d,a={};for(b in s)if(s.hasOwnProperty(b))for(c in a[b]=d=[],s[b])s[b].hasOwnProperty(c)&&d.push(c);return a},B.setLineWidth=function(a){return G((a*x).toFixed(2)+" w"),this},B.setDrawColor=function(a,b,c,d){return a=void 0===b||void 0===d&&a===b===c?"string"==typeof a?a+" G":E(a/255)+" G":void 0===d?"string"==typeof a?[a,b,c,"RG"].join(" "):[E(a/255),E(b/255),E(c/255),"RG"].join(" "):"string"==typeof a?[a,b,c,d,"K"].join(" "):[E(a),E(b),E(c),E(d),"K"].join(" "),G(a),this},B.setFillColor=function(a,b,c,d){return a=void 0===b||void 0===d&&a===b===c?"string"==typeof a?a+" g":E(a/255)+" g":void 0===d?"string"==typeof a?[a,b,c,"rg"].join(" "):[E(a/255),E(b/255),E(c/255),"rg"].join(" "):"string"==typeof a?[a,b,c,d,"k"].join(" "):[E(a),E(b),E(c),E(d),"k"].join(" "),G(a),this},B.setTextColor=function(a,b,c){var d=/#[0-9A-Fa-f]{6}/;return"string"==typeof a&&d.test(a)&&(a=a.replace("#",""),c=parseInt(a,16),a=c>>16&255,b=c>>8&255,c&=255),l=0===a&&0===b&&0===c||"undefined"==typeof b?(a/255).toFixed(3)+" g":[(a/255).toFixed(3),(b/255).toFixed(3),(c/255).toFixed(3),"rg"].join(" "),this},B.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},B.setLineCap=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line cap style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return z=b,G(b.toString(10)+" J"),this},B.setLineJoin=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line join style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return A=b,G(b.toString(10)+" j"),this},B.output=R,B.save=function(a){B.output("save",a)};for(D in a.API)a.API.hasOwnProperty(D)&&("events"===D&&a.API.events.length?function(a,b){var c,d,e;for(e=b.length-1;-1!==e;e--)c=b[e][0],d=b[e][1],a.subscribe.apply(a,[c].concat("function"==typeof d?[d]:d))}(C,a.API.events):B[D]=a.API[D]);return function(){var c,d,e,f,a=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"]];for(c=0,d=a.length;c<d;c++){var g=a[c][0],h=a[c][1];e=a[c][2],f="F"+(b(r)+1).toString(10);var g=r[f]={id:f,PostScriptName:g,fontName:h,fontStyle:e,encoding:"StandardEncoding",metadata:{}},i=f;void 0===s[h]&&(s[h]={}),s[h][e]=i,C.publish("addFont",g),e=f,f=a[c][0].split("-"),g=f[0],f=f[1]||"",void 0===s[g]&&(s[g]={}),s[g][f]=e}C.publish("addFonts",{fonts:r,dictionary:s})}(),u="F1",N(),C.publish("initialized"),B}"undefined"==typeof btoa&&(window.btoa=function(a){var c,d,e,f,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),g=0,h=0,i="",i=[];do c=a.charCodeAt(g++),d=a.charCodeAt(g++),e=a.charCodeAt(g++),f=c<<16|d<<8|e,c=f>>18&63,d=f>>12&63,e=f>>6&63,f&=63,i[h++]=b[c]+b[d]+b[e]+b[f];while(g<a.length);return i=i.join(""),a=a.length%3,(a?i.slice(0,a-3):i)+"===".slice(a||3)}),"undefined"==typeof atob&&(window.atob=function(a){var b,c,d,e,f,g=0,h=0;e="";var i=[];if(!a)return a;a+="";do b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),d=b<<18|c<<12|e<<6|f,b=d>>16&255,c=d>>8&255,d&=255,64===e?i[h++]=String.fromCharCode(b):64===f?i[h++]=String.fromCharCode(b,c):i[h++]=String.fromCharCode(b,c,d);while(g<a.length);return e=i.join("")});var b="function"==typeof Object.keys?function(a){return Object.keys(a).length}:function(a){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b},c=function(a){this.topics={},this.context=a,this.publish=function(a,b){if(this.topics[a]){var e,f,g,h,c=this.topics[a],d=[],i=function(){};for(b=Array.prototype.slice.call(arguments,1),f=0,g=c.length;f<g;f++)h=c[f],e=h[0],h[1]&&(h[0]=i,d.push(f)),e.apply(this.context,b);for(f=0,g=d.length;f<g;f++)c.splice(d[f],1)}},this.subscribe=function(a,b,c){return this.topics[a]?this.topics[a].push([b,c]):this.topics[a]=[[b,c]],{topic:a,callback:b}},this.unsubscribe=function(a){if(this.topics[a.topic]){var c,d,b=this.topics[a.topic];for(c=0,d=b.length;c<d;c++)b[c][0]===a.callback&&b.splice(c,1)}}};return a.API={events:[]},a}();!function(a){var b=function(){var b,a=this.internal.collections.addImage_images;for(b in a){var c=a[b],d=this.internal.newObject(),e=this.internal.write,f=this.internal.putStream;if(c.n=d,e("<</Type /XObject"),e("/Subtype /Image"),e("/Width "+c.w),e("/Height "+c.h),"Indexed"===c.cs?e("/ColorSpace [/Indexed /DeviceRGB "+(c.pal.length/3-1)+" "+(d+1)+" 0 R]"):(e("/ColorSpace /"+c.cs),"DeviceCMYK"===c.cs&&e("/Decode [1 0 1 0 1 0 1 0]")),e("/BitsPerComponent "+c.bpc),"f"in c&&e("/Filter /"+c.f),"dp"in c&&e("/DecodeParms <<"+c.dp+">>"),"trns"in c&&c.trns.constructor==Array)for(var g="",h=0;h<c.trns.length;h++)g+=c[g][h]+" "+c.trns[h]+" ",e("/Mask ["+g+"]");"smask"in c&&e("/SMask "+(d+1)+" 0 R"),e("/Length "+c.data.length+">>"),f(c.data),e("endobj")}},c=function(){var c,d,a=this.internal.collections.addImage_images,b=this.internal.write;for(d in a)c=a[d],b("/I"+c.i,c.n,"0","R")};a.addImage=function(a,d,e,f,g,h){if("object"==typeof a&&1===a.nodeType){d=document.createElement("canvas"),d.width=a.clientWidth,d.height=a.clientHeight;var i=d.getContext("2d");if(!i)throw"addImage requires canvas to be supported by browser.";i.drawImage(a,0,0,d.width,d.height),a=d.toDataURL("image/jpeg"),d="JPEG"}if("JPEG"!==d.toUpperCase())throw Error("addImage currently only supports format 'JPEG', not '"+d+"'");var j;d=this.internal.collections.addImage_images;var i=this.internal.getCoordinateString,k=this.internal.getVerticalCoordinateString;if("data:image/jpeg;base64,"===a.substring(0,23)&&(a=atob(a.replace("data:image/jpeg;base64,",""))),d)if(Object.keys)j=Object.keys(d).length;else{var l=d,m=0;for(j in l)l.hasOwnProperty(j)&&m++;j=m}else j=0,this.internal.collections.addImage_images=d={},this.internal.events.subscribe("putResources",b),this.internal.events.subscribe("putXobjectDict",c);a:{var n,l=a;if(255===!l.charCodeAt(0)||216===!l.charCodeAt(1)||255===!l.charCodeAt(2)||224===!l.charCodeAt(3)||74===!l.charCodeAt(6)||70===!l.charCodeAt(7)||73===!l.charCodeAt(8)||70===!l.charCodeAt(9)||0===!l.charCodeAt(10))throw Error("getJpegSize requires a binary jpeg file");n=256*l.charCodeAt(4)+l.charCodeAt(5);for(var m=4,o=l.length;m<o;){if(m+=n,255!==l.charCodeAt(m))throw Error("getJpegSize could not find the size of the image");if(192===l.charCodeAt(m+1)||193===l.charCodeAt(m+1)||194===l.charCodeAt(m+1)||195===l.charCodeAt(m+1)||196===l.charCodeAt(m+1)||197===l.charCodeAt(m+1)||198===l.charCodeAt(m+1)||199===l.charCodeAt(m+1)){n=256*l.charCodeAt(m+5)+l.charCodeAt(m+6),l=256*l.charCodeAt(m+7)+l.charCodeAt(m+8),l=[l,n];break a}m+=2,n=256*l.charCodeAt(m)+l.charCodeAt(m+1)}l=void 0}return a={w:l[0],h:l[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:j,data:a},d[j]=a,g||h||(h=g=-96),0>g&&(g=-72*a.w/g/this.internal.scaleFactor),0>h&&(h=-72*a.h/h/this.internal.scaleFactor),0===g&&(g=h*a.w/a.h),0===h&&(h=g*a.h/a.w),this.internal.write("q",i(g),"0 0",i(h),i(e),k(f+h),"cm /I"+a.i,"Do Q"),this}}(jsPDF.API);